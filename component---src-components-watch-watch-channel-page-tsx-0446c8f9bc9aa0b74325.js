(self.webpackChunksky_plus_epg_simulator=self.webpackChunksky_plus_epg_simulator||[]).push([[22],{2500:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(8179),r=n.n(a),o=n(3373),l=n(7399),i=n(2585),s=n(1766),c=(0,l.Z)({root:{display:"inline-flex",background:o.Z.main,padding:0,fontFamily:"ZurichBT",fontWeight:"bold",fontSize:18,verticalAlign:"middle",transform:"translateY(-0.1em)"},vertical:{flexDirection:"column","& > svg":{height:"0.6em","&:first-child":{transformOrigin:"center",transform:"rotate(0.5turn)",marginBottom:2},"&:last-child":{}}},horizontal:{flexDirection:"row",alignItems:"center",height:"1.3em","& > svg":{height:"0.6em",transformOrigin:"center","&:first-child":{transform:"rotate(90deg)",marginLeft:"-0.25em"},"&:last-child":{transform:"rotate(-90deg)",marginLeft:"-0.45em",marginRight:"-0.25em"}}}});function u(e){var t,n=e.className,a=e.variant,o=c();return s.default.createElement("span",{className:(0,i.Z)(o.root,n,(t={},t[o.vertical]="vertical"===a,t[o.horizontal]="horizontal"===a,t))},s.default.createElement(r(),null),s.default.createElement(r(),null))}},3213:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var a,r,o=n(4181),l=n(3373),i=n(1766);!function(e){e[e.NO_CARD_INSERTED=1]="NO_CARD_INSERTED",e[e.CARD_READ_ERROR=2]="CARD_READ_ERROR",e[e.CARD_CHECK_FAIL=3]="CARD_CHECK_FAIL",e[e.UNAUTHORISED_CARD=6]="UNAUTHORISED_CARD",e[e.UNPAIRED_CARD=7]="UNPAIRED_CARD",e[e.ENCRYPTION_KEY_FAILURE=8]="ENCRYPTION_KEY_FAILURE",e[e.UNAUTHORISED_CARD_2=9]="UNAUTHORISED_CARD_2",e[e.NO_SATELLITE_SIGNAL=28]="NO_SATELLITE_SIGNAL",e[e.NO_SATELLITE_SIGNAL_2=29]="NO_SATELLITE_SIGNAL_2"}(r||(r={}));var s=((a={})[r.NO_CARD_INSERTED]=i.default.createElement(i.default.Fragment,null,"Insert your Sky viewing card"),a[r.NO_SATELLITE_SIGNAL]=i.default.createElement(i.default.Fragment,null,"No Satellite Signal is being received.",i.default.createElement("br",null),"Please unplug your box from the mains, then plug it back in and wait 5 minutes before trying again.",i.default.createElement("br",null),"If the fault persists, contact customer services."),a[r.NO_SATELLITE_SIGNAL_2]=i.default.createElement(i.default.Fragment,null,"No Satellite Signal is being received.",i.default.createElement("br",null),"Please unplug your box from the mains, then plug it back in and wait 5 minutes before trying again.",i.default.createElement("br",null),"If the fault persists, contact customer services."),a),c=r,u=n(1074),d=n(7399),m=n(2585),f=n(8978),g=n(132),p=(0,d.Z)({messageBox:{width:"80%",overflow:"hidden",maxHeight:"80%"},messageBoxWider:{width:"92%"},messageBoxHorizCenter:{margin:"auto"},messageBoxHeader:{background:l.Z.yellowMain,color:l.Z.main,textTransform:"uppercase",lineHeight:"29px",fontSize:24,textAlign:"center",position:"relative",fontFamily:"Zurich",fontStretch:"expanded",fontWeight:700,letterSpacing:.4},messageBoxErrorCode:{position:"absolute",right:4},messageBoxContent:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:4,paddingBottom:1,fontFamily:"ZurichBT",fontWeight:400,background:l.Z.mainLight,color:l.Z.mainText,fontSize:25,textAlign:"center",letterSpacing:.5,lineHeight:"32px",minHeight:136},messageBoxFooter:{color:l.Z.yellowText,paddingBottom:1}}),E=function(e){var t=e.title,n=void 0===t?"For your information":t,a=e.errorCode,r=void 0===a?c.NO_SATELLITE_SIGNAL:a,l=e.children,d=void 0===l?s[c.NO_SATELLITE_SIGNAL]:l,E=e.customControlData,h=void 0===E?{text:"BACK UP",control:"backUp"}:E,v=e.controlPrompt,b=void 0!==v&&v,w=e.controlPromptAction,x=void 0===w?"return":w,N=e.onControlPressed,A=void 0===N?function(){}:N,S=e.wider,T=void 0!==S&&S,y=e.horizontallyCentered,L=void 0!==y&&y,_=e.className,C=p(),Z=(0,f.FV)(o.X8),k=Z[0],I=Z[1],R=k.backUp;return b&&!k.backUp&&I((0,u.Z)("backUp",!0)),(0,i.useEffect)((function(){if(b){var e=function(e){e.detail.control===h.control&&(e.stopImmediatePropagation(),A())};return document.addEventListener("skyControlPressed",e),function(){document.removeEventListener("skyControlPressed",e),!R&&I((0,u.Z)("backUp",!1))}}})),i.default.createElement("section",{role:"alert",className:(0,m.Z)(C.messageBox,T&&C.messageBoxWider,L&&C.messageBoxHorizCenter,_)},i.default.createElement("header",{className:C.messageBoxHeader},n,i.default.createElement("span",{className:C.messageBoxErrorCode},null!=r&&String(r).padStart(2,"0"))),i.default.createElement("article",{className:C.messageBoxContent},d,b&&i.default.createElement("footer",{className:C.messageBoxFooter},"Press ",i.default.createElement(g.Z,null,h.text)," to ",x)))}},1733:function(e,t,n){"use strict";var a=n(3373),r=n(7399),o=n(1766),l=n(3213),i=(0,r.Z)({root:{background:a.Z.accent,position:"absolute",top:0,bottom:0,right:0,left:0,display:"flex",alignItems:"center",justifyContent:"center"},messageBox:{width:"80%",overflow:"hidden",maxHeight:"80%"},messageBoxHeader:{background:a.Z.yellowMain,color:a.Z.main,textTransform:"uppercase",lineHeight:"29px",fontSize:24,textAlign:"center",position:"relative"},messageBoxErrorCode:{position:"absolute",right:4},messageBoxContent:{padding:4,paddingBottom:0,fontFamily:"ZurichBT",background:a.Z.mainLight,color:a.Z.mainText,fontSize:25,textAlign:"center",letterSpacing:.5,lineHeight:"32px"}});t.Z=function(e){var t=Object.assign({},e),n=i();return o.default.createElement("div",{className:n.root},o.default.createElement(l.Z,t))}},7695:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var a=n(4181),r=n(1733),o=n(1074),l=n(3230),i=n(7399),s=n(7049),c=n(5444),u=n(8063),d=n(1766),m=n(8978),f=n(9962),g=n(1335),p=n(2500),E=n(3373),h=n(7504),v=n(2580),b=n.n(v),w=n(8573),x=n.n(w),N=n(7155),A=n.n(N);b().extend(x()),b().extend(A());var S=(0,i.Z)({root:{position:"absolute",zIndex:100,width:"80%",bottom:48,left:"50%",transform:"translateX(-50%)",background:"#fff"},header:{color:E.Z.main,fontFamily:"Zurich",fontSize:22,padding:"0 4px",paddingLeft:6,display:"flex",borderBottom:"4px solid "+E.Z.mainFadedText,height:32},headerTime:{marginLeft:"auto",color:E.Z.mainFadedText},main:{padding:"4px 0",paddingLeft:48,background:E.Z.mainFaded,fontSize:22,height:"2.75em",display:"grid",gridTemplateColumns:"18fr 82fr",gridTemplateRows:"1fr 1fr",fontFamily:"ZurichBT",gap:6,lineHeight:1,"& > *":{"&":{textOverflow:"ellipsis"},"text-overflow":'".."',whiteSpace:"nowrap",overflow:"hidden"}},footer:{color:E.Z.main,fontFamily:"Zurich",fontSize:22,borderTop:"4px solid "+E.Z.mainFadedText,display:"grid",gridTemplateColumns:"repeat(4, 1fr)",height:32,paddingLeft:6,alignItems:"end"},controlArrow:{fontSize:22,position:"absolute",transform:"translateY(0.5px)","& + span":{marginLeft:"1.7em"}},footerSection:{position:"relative",maxHeight:"100%","& > $footerLabel":{display:"inline-block",transform:"translateY(-2px)"}},footerLabel:{},now:{color:"#fff"},later:{color:E.Z.mainFadedText},noInfo:{color:E.Z.yellowText,gridColumn:"1 / span 2"}});function T(e){var t=e.channel,n=S(),a=(0,m.sJ)(f.v).time,r=(0,d.useState)(null),o=r[0],l=r[1];(0,d.useEffect)((function(){var e=new AbortController;return null===o&&(0,h.Z)(t.sid,{abortController:e}).then((function(e){var t,n=e.schedule.findIndex((function(e){return e.startTime<=a.toDate().getTime()&&e.startTime+1e3*e.duration>=a.toDate().getTime()}));-1===n?l(!1):l([e.schedule[n],null===(t=e.schedule)||void 0===t?void 0:t[n+1]].filter(Boolean))})).catch((function(e){"AbortError"!==e.name&&console.error(e)})),function(){e.abort()}}));var i=d.default.createElement("span",{className:n.noInfo},"Further schedule information is not available");return d.default.createElement("aside",{className:n.root},d.default.createElement("div",{className:n.header},d.default.createElement("span",{style:{width:t.channelNumber.length+.5+"ch"}},t.channelNumber),d.default.createElement("span",null,t.name),d.default.createElement("span",{className:n.headerTime},a.format("h.mma ddd D MMM"))),d.default.createElement("div",{className:n.main},(null==o?void 0:o[0])&&d.default.createElement(d.default.Fragment,null,d.default.createElement("span",{className:n.now},"NOW"),d.default.createElement("span",{className:n.now},o[0].title)),null!=o&&o[1]?d.default.createElement(d.default.Fragment,null,d.default.createElement("span",{className:n.later},b()(o[1].startTime).tz("Europe/London").format("h.mma")),d.default.createElement("span",{className:n.later},o[1].title)):i,!1===o&&i),d.default.createElement("div",{className:n.footer},d.default.createElement("div",{className:n.footerSection},d.default.createElement(p.Z,{className:n.controlArrow,variant:"horizontal"}),d.default.createElement("span",{className:n.footerLabel},"Time")),d.default.createElement("div",{className:n.footerSection},d.default.createElement(p.Z,{className:n.controlArrow,variant:"vertical"}),d.default.createElement("span",{className:n.footerLabel},"Channel")),d.default.createElement("div",{className:n.footerSection},d.default.createElement(g.Z,{buttonColor:"yellow"}),d.default.createElement("span",{className:n.footerLabel},"Messages")),d.default.createElement("div",{className:n.footerSection},d.default.createElement(g.Z,{buttonColor:"blue"}),d.default.createElement("span",{className:n.footerLabel},"Favourite"))))}var y=(0,i.Z)({root:{background:"#000"},video:{width:"100%",height:"100%"}}),L=function(e){var t=e.pageContext,n=t.channel,i=t.streamData,f=y(),g=(0,m.FV)(a.X8),p=g[0],E=g[1],h=(0,m.sJ)(a.Db),v=(0,d.useState)({error:!1}),b=v[0],w=v[1],x=(0,d.useRef)(null),N=(0,u.Ds)(),A=N.enqueueSnackbar,S=N.closeSnackbar;function L(e){var t=e.detail.control;["backUp"].includes(t)&&(0,c.navigate)("/",{state:{selectedTab:"GUIDE"}})}return p.backUp||E((0,o.Z)(["backUp"],!0)),(0,d.useEffect)((function(){var e;return document.addEventListener("skyControlPressed",L),window.__bgAudio.pause(),h.hasTvLicense&&x.current&&(window.Hls.isSupported()||b.error||w((function(e){return Object.assign({},e,{error:!0})})),(e=new window.Hls({debug:!0})).loadSource(i.streamUrl),e.attachMedia(x.current),e.on(window.Hls.Events.ERROR,(function(e,t){if(console.warn(t),"networkError"===t.type)w((function(e){return Object.assign({},e,{error:!0})}))})),e.on(window.Hls.Events.MEDIA_ATTACHED,(function(){x.current.play().catch((function(e){console.warn(e),A("TV stream is paused",{variant:"warning",persist:!0,key:"STREAM_PAUSED",action:function(e){return d.default.createElement(s.Z,{onClick:function(){x.current.play(),S(e)}},"Resume stream")}})}))}))),function(){document.removeEventListener("skyControlPressed",L),p.backUp&&E((0,o.Z)(["backUp"],!1)),e&&e.destroy(),S("STREAM_PAUSED")}})),d.default.createElement(l.Z,null,d.default.createElement("div",{className:f.root},h.hasTvLicense&&!b.error&&d.default.createElement("video",{ref:x,className:f.video}),h.hasTvLicense&&b.error&&d.default.createElement(r.Z,{errorCode:30},d.default.createElement("br",null),"There is a technical fault with this channel",d.default.createElement("br",null),"Please try again later"),h.hasOptedOutOfTvLicenseContent&&d.default.createElement(r.Z,{errorCode:null,controlPrompt:!0,controlPromptAction:"return"},d.default.createElement("br",null),"This content is only available to TV Licensees"),d.default.createElement(T,{channel:n})))}},7504:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var a=n(5861),r=n(7757),o=n.n(r),l=n(2580),i=n.n(l),s=n(8573),c=n.n(s),u=n(7155),d=n.n(u);i().extend(c()),i().extend(d());var m="https://awk.epgsky.com/hawk/linear/schedule";function f(e,t){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)(o().mark((function e(t,n){var a,r,l,s,c,u,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(a=void 0===n?{}:n).date,l=a.abortController,s=r?i()(r).tz("Europe/London").format("YYYYMMDD"):i()().tz("Europe/London").format("YYYYMMDD"),e.next=4,fetch(m+"/"+s+"/"+t,{signal:l.signal});case 4:return e.next=6,e.sent.json();case 6:return c=e.sent,u=c.schedule[0].events,d={date:c.date,schedule:u.map((function(e){return{startTime:1e3*e.st,duration:e.d,eventId:e.eid,channelGenreId:e.cgid,programmeUuid:e.programmeuuid,seasonNumber:e.seasonnumber,episodeNumber:e.episodenumber,seasonUuid:e.seasonuuid,seriesUuid:e.seriesuuid,hasChildren:e.haschildren,title:e.t,synopsis:e.sy,eg:e.eg,esg:e.esg,tso:e.tso,rating:e.r,audioTechnology:e.at,hasSubtitles:e.s,hasAudioDescription:e.ad,isHd:e.hd,isNew:e.new,canSeriesLink:e.canl,canBookRecording:e.canb,hasAlternativeAudio:e.hasAlternativeAudio,isRestartable:e.restartable,slo:e.slo,w:e.w,ippv:e.ippv,oppv:e.oppv}}))},e.abrupt("return",d);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1074:function(e,t,n){"use strict";function a(e,t){var n=Array.isArray(e)?e:[e];return function(e){var a=Object.assign({},e);return n.forEach((function(e){if(!Object.keys(a).includes(e))throw'Invalid control provided to `controlsShownStateSetter`: "'+e+'".';a[e]="boolean"!=typeof t?!a[e]:t})),a}}n.d(t,{Z:function(){return a}})},3230:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n.p+"static/sharing-image-db5dc5b9424e9194bebb470cf9c6e978.jpg",r=n(5444),o=n(1766),l=n(2013),i=function(e){var t=e.description,n=e.meta,i=e.title,s=(0,r.useStaticQuery)("63159454").site,c=t||s.siteMetadata.description,u=i?i+" | "+s.siteMetadata.title:s.siteMetadata.title;return o.default.createElement(o.default.Fragment,null,o.default.createElement(l.Title,null,u),o.default.createElement(l.Meta,{name:"description",content:c}),o.default.createElement(l.Meta,{name:"og:locale",content:"en_GB"}),o.default.createElement(l.Meta,{name:"og:title",content:u}),o.default.createElement(l.Meta,{name:"og:description",content:c}),o.default.createElement(l.Meta,{name:"og:type",content:"website"}),o.default.createElement(l.Meta,{name:"og:image",content:a}),o.default.createElement(l.Meta,{name:"twitter:card",content:"summary_large_image"}),o.default.createElement(l.Meta,{name:"twitter:title",content:u}),o.default.createElement(l.Meta,{name:"twitter:description",content:c}),o.default.createElement(l.Meta,{name:"twitter:creator",content:"@davwheat"}),o.default.createElement(l.Meta,{name:"twitter:site",content:"@davwheat"}),o.default.createElement(l.Meta,{name:"twitter:image",content:a}),o.default.createElement(l.Meta,{name:"twitter:image:alt",content:"Screenshot of the Sky+ Web EPG."}),o.default.createElement(l.Link,{rel:"preconnect",href:"https://awk.epgsky.com/"}),n&&n.map((function(e,t){return o.default.createElement(l.Meta,{key:e.name+"--"+t,name:e.name,content:e.content})})))},s=function(e){var t=e.title,n=e.description,a=e.children;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i,{title:t,description:n}),a)}},8179:function(e,t,n){var a=n(1766);function r(e){return a.createElement("svg",e,a.createElement("path",{fill:"#eec401",d:"M0 0l.2.2L11 10.9 21.7 0h-7.5L11 3.4 7.5 0z"}))}r.defaultProps={viewBox:"0 0 21.7 10.9"},e.exports=r,r.default=r}}]);
//# sourceMappingURL=component---src-components-watch-watch-channel-page-tsx-0446c8f9bc9aa0b74325.js.map