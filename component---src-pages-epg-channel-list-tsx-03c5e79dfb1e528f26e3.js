(self.webpackChunksky_plus_epg_simulator=self.webpackChunksky_plus_epg_simulator||[]).push([[648],{6537:function(e,t,n){"use strict";var r=n(1766),a="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.Z=function(e){var t=e.children,n=e.defer,l=void 0!==n&&n,i=e.fallback,o=void 0===i?null:i,s=r.useState(!1),u=s[0],c=s[1];return a((function(){l||c(!0)}),[l]),r.useEffect((function(){l&&c(!0)}),[l]),r.createElement(r.Fragment,null,u?t:o)}},330:function(e){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isBetween=function(e,t,r,a){var l=n(e),i=n(t),o="("===(a=a||"()")[0],s=")"===a[1];return(o?this.isAfter(l,r):!this.isBefore(l,r))&&(s?this.isBefore(i,r):!this.isAfter(i,r))||(o?this.isBefore(l,r):!this.isAfter(l,r))&&(s?this.isAfter(i,r):!this.isBefore(i,r))}}}()},3029:function(e,t,n){"use strict";n.d(t,{h:function(){return r.Z},i:function(){return d}});var r=n(2476),a=n(6524),l=n(3373),i=n(7399),o=n(6537),s=n(1766),u=n(8978),c=(0,i.Z)({root:{fontFamily:"Zurich",fontWeight:700,color:l.Z.accent,display:"flex",flexDirection:"column",marginTop:11},date:{fontStretch:"condensed",fontSize:24},title:{fontStretch:"expanded",letterSpacing:.4,textTransform:"uppercase",fontSize:28}}),d=function(e){var t=e.heading,n=(0,u.sJ)(a.vb).time.format("h.mma ddd D MMM"),r=c();return s.default.createElement(o.Z,null,s.default.createElement("div",{className:r.root},s.default.createElement("p",{className:r.date},n),s.default.createElement("h1",{className:r.title},t)))}},5081:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var r=n(6524),a=n(5936),l=n(3262),i=n(7399),o=n(1766),s=n(3029),u=n(9205),c=n(1671),d=n(3213),f=n(3373),m=n(1717);var h=n(6537),p=n(6851),g=n(2137),v=n(7757),E=n.n(v),w=n(2580),b=n.n(w),Z="https://awk.epgsky.com/hawk/linear/schedule";function y(e,t){return N.apply(this,arguments)}function N(){return(N=(0,g.Z)(E().mark((function e(t,n){var r,a,l,i,o,s,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(r=void 0===n?{}:n).date,l=r.abortController,i=a?b()(a).format("YYYYMMDD"):b()().format("YYYYMMDD"),e.next=4,fetch(Z+"/"+i+"/"+t,{signal:l.signal});case 4:return e.next=6,e.sent.json();case 6:return o=e.sent,s=o.schedule[0].events,u={date:o.date,schedule:s.map((function(e){return{startTime:1e3*e.st,duration:e.d,eventId:e.eid,channelGenreId:e.cgid,programmeUuid:e.programmeuuid,seasonNumber:e.seasonnumber,episodeNumber:e.episodenumber,seasonUuid:e.seasonuuid,seriesUuid:e.seriesuuid,hasChildren:e.haschildren,title:e.t,synopsis:e.sy,eg:e.eg,esg:e.esg,tso:e.tso,rating:e.r,audioTechnology:e.at,hasSubtitles:e.s,hasAudioDescription:e.ad,isHd:e.hd,isNew:e.new,canSeriesLink:e.canl,canBookRecording:e.canb,hasAlternativeAudio:e.hasAlternativeAudio,isRestartable:e.restartable,slo:e.slo,w:e.w,ippv:e.ippv,oppv:e.oppv}}))},e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=n(2585),x=n(330),T=n.n(x),S=n(8978),C=n(7039),F=n.n(C),H=(0,i.Z)({info:{height:"0.75em",display:"inline-block"},infoContainer:{}}),P=function(e){var t=e.programmes,n=e.className,a=H(),l=(0,S.sJ)(r.zg).scheduleStartTime,i=t.length,s=0;return o.default.createElement(o.default.Fragment,null,t.map((function(e,t){var r=-b()(e.startTime).diff(l,"minutes"),u=Math.round(e.duration/60)-(r>0?r:0);return t<i-1?s+=u:u=90-s,o.default.createElement("span",{style:{gridColumnEnd:"span "+u},className:(0,k.Z)(n,u<25&&a.infoContainer),key:e.startTime+"__"+e.eventId},u<25?o.default.createElement(F(),{className:a.info}):e.title)})))},A=o.default.memo(P);b().extend(T());var M=(0,i.Z)({item:{padding:"3px 4px"},channelNumber:{width:"3ch",marginRight:4},channelName:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:'".."',color:"#fff",background:f.Z.main,lineHeight:1},programme:{"&":{textOverflow:"ellipsis"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:'".."',color:"#fff",background:f.Z.main,lineHeight:1},noListings:{background:f.Z.mainFaded,color:f.Z.mainFadedText}});function Y(e,t){return t.filter((function(t){var n=b()(t.startTime).diff(e,"minutes"),r=b()(t.startTime+1e3*t.duration).diff(e,"minutes"),a=b()(e).isBetween(t.startTime,t.startTime+1e3*t.duration,"minutes","()");return n>=0&&n<90||r>0&&r<90||a}))}var _=function(e){var t=e.channel,n=M(),a=(0,S.sJ)(r.zg).scheduleStartTime,l=(0,o.useState)(null),i=l[0],s=l[1],u=(0,o.useMemo)((function(){return i?Y(a,i.schedule):null}),[Y,a,i]);return(0,o.useEffect)((function(){if(!i){var e=new AbortController;return y(String(t.sid),{abortController:e}).then((function(e){s(e)})).catch((function(){})),function(){e.abort()}}}),[i,y,t]),o.default.createElement(o.default.Fragment,null,o.default.createElement("span",{className:(0,k.Z)(n.channelName,n.item)},o.default.createElement("span",{className:n.channelNumber},t.channelNumber),t.name),o.default.createElement("span",null),!i&&!u&&o.default.createElement("span",{"aria-hidden":!0,style:{gridColumnEnd:"span 90"}}),i&&u&&o.default.createElement(A,{className:(0,k.Z)(n.programme,n.item),programmes:u}),i&&u&&0===u.length&&o.default.createElement("span",{className:(0,k.Z)(n.programme,n.noListings,n.item),style:{gridColumnEnd:"span 90"}},"..no listings available"))},z=n(5067),B=(0,i.Z)({timingHeader:{color:f.Z.accent,lineHeight:1.5,"&:first-child":{textAlign:"right"},"&:not(:first-child)":{gridColumnEnd:"span 30"}}}),U=function(){var e=(0,S.sJ)(r.zg).scheduleStartTime,t=B();return o.default.createElement(o.default.Fragment,null,o.default.createElement("span",{className:t.timingHeader},"Today"),o.default.createElement("span",null),o.default.createElement("span",{className:t.timingHeader},(0,z.j)(e)),o.default.createElement("span",{className:t.timingHeader},(0,z.j)(e.add(30,"minutes"))),o.default.createElement("span",{className:t.timingHeader},(0,z.j)(e.add(60,"minutes"))))},L=(0,i.Z)({root:{position:"relative",display:"grid",gridTemplateColumns:"33% 2px repeat(90, minmax(0, 1fr))",gridTemplateRows:"repeat(11, calc(1em + 6px))",width:"85%",maxWidth:"85%",margin:"auto",gap:4,overflow:"visible",fontFamily:"Zurich",fontStretch:"condensed",fontSize:24,marginTop:-4,"&::after, &::before":{content:'""',display:"block",position:"absolute",height:24,width:32,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundImage:"url("+u.Z+")",right:0,transformOrigin:"center"},"&::after":{bottom:0,transform:"translateY(100%)"},"&::before":{top:34,transform:"translateY(-100%) rotate(0.5turn)"}},colorButtons:{position:"static",width:"85%",maxWidth:"85%",margin:"auto",marginTop:16},controlPrompt:{fontFamily:"ZurichBT",color:f.Z.accent,width:"85%",maxWidth:"85%",margin:"auto",fontSize:24,marginTop:8},controlText:{fontSize:20},noChannelsErrorMsg:{gridColumn:"1 / -1",gridRow:"2 / -1",justifySelf:"center",alignSelf:"center",width:"100%"}});var R=function(e){var t,n,r=e.firstChannel,a=e.genreFilter,l=L(),i=(0,o.useState)(r),s=i[0],u=i[1],f=(t=s+"__"+a,n=(0,o.useRef)(),(0,o.useEffect)((function(){n.current=t})),n.current),g=(0,o.useState)([]),v=g[0],E=g[1];function w(e){u((function(t){var n,r,l=(0,m.Yh)(t,10*e,a);l===t&&(l=1===e?(null===(n=(0,m.Hp)(0,a))||void 0===n?void 0:n.channelNumber)||"101":(null===(r=(0,m.Hp)(-1,a))||void 0===r?void 0:r.channelNumber)||"101");return window.history.replaceState&&function(e,t){var n=new URL(window.location.href);n.search="?start="+e,null!==t&&(n.search=n.search+"&genre="+t),window.history.replaceState({path:n.href},"",n.href)}(l,a),l}))}(0,o.useEffect)((function(){if(f!==s+"__"+a){var e=(0,m.Fn)(s,10,a);E(e)}}));var b=!v||0===v.length;return o.default.createElement(o.default.Fragment,null,o.default.createElement("section",{className:l.root},o.default.createElement(U,null),o.default.createElement(h.Z,null,null==v?void 0:v.map((function(e){return o.default.createElement(_,{key:e.sid,channel:e})})),b&&o.default.createElement(d.Z,{errorCode:null,className:l.noChannelsErrorMsg,controlPrompt:!0,controlPromptAction:"cancel"},o.default.createElement("br",null),"There are no services of this type available."))),o.default.createElement(p.Z,{className:l.colorButtons,buttonPressHandler:function(e){"red"===e?w(-1):"green"===e&&w(1)},buttonsText:b?{}:{red:"Page Up",green:"Page Down",yellow:"+24 Hours",blue:"â€“24 Hours"}}),o.default.createElement("p",{className:l.controlPrompt},!b&&o.default.createElement(o.default.Fragment,null,"Press ",o.default.createElement(c.Z,{className:l.controlText},"SELECT")," to view")))},D=(0,i.Z)({root:{background:"url("+a.Z+")"}}),I=function(e){var t=e.startingChannel,n=e.genreFilter,r=D();return o.default.createElement("div",{className:r.root},o.default.createElement(s.h,{logoText:"guide"},o.default.createElement(s.i,{heading:l.Y[n]||"All channels"})),o.default.createElement(R,{firstChannel:t,genreFilter:n}))},j=n(1074),J=n(1917),O=n(3230),W=n(5444);var G=function(e){var t,n,a=e.location,l=(null==a||null===(t=a.state)||void 0===t?void 0:t.startFromChannelNumber)||function(){if((0,J.Z)())return null;try{return new URL(window.location.href).searchParams.get("start")}catch(e){return null}}()||"101",i=(null==a||null===(n=a.state)||void 0===n?void 0:n.genre)||function(){if((0,J.Z)())return null;try{return parseInt(new URL(window.location.href).searchParams.get("genre"))||null}catch(e){return null}}()||null,s=(0,S.Zl)(r.X8);function u(e){var t=e.detail.control;["backUp"].includes(t)&&(0,W.navigate)("/",{state:{selectedTab:"GUIDE"}})}return(0,o.useEffect)((function(){return document.addEventListener("skyControlPressed",u),s((0,j.Z)(["backUp"],!0)),function(){document.removeEventListener("skyControlPressed",u),s((0,j.Z)(["backUp"],!1))}})),o.default.createElement(O.Z,null,o.default.createElement(I,{startingChannel:l,genreFilter:i}))}},7039:function(e,t,n){var r=n(1766);function a(e){return r.createElement("svg",e,r.createElement("path",{fill:"currentColor",d:"M.9 0v1.4h2.87V0zm0 2.12v3.85l-.9.17v.81h4.68v-.81l-.91-.17V2.12z"}))}a.defaultProps={viewBox:"0 0 4.68 6.95"},e.exports=a,a.default=a}}]);
//# sourceMappingURL=component---src-pages-epg-channel-list-tsx-03c5e79dfb1e528f26e3.js.map