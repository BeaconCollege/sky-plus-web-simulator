(self.webpackChunksky_plus_epg_simulator=self.webpackChunksky_plus_epg_simulator||[]).push([[648],{6537:function(e,t,n){"use strict";var r=n(1766),a="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.Z=function(e){var t=e.children,n=e.defer,l=void 0!==n&&n,i=e.fallback,o=void 0===i?null:i,s=r.useState(!1),u=s[0],c=s[1];return a((function(){l||c(!0)}),[l]),r.useEffect((function(){l&&c(!0)}),[l]),r.createElement(r.Fragment,null,u?t:o)}},330:function(e){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isBetween=function(e,t,r,a){var l=n(e),i=n(t),o="("===(a=a||"()")[0],s=")"===a[1];return(o?this.isAfter(l,r):!this.isBefore(l,r))&&(s?this.isBefore(i,r):!this.isAfter(i,r))||(o?this.isBefore(l,r):!this.isAfter(l,r))&&(s?this.isAfter(i,r):!this.isBefore(i,r))}}}()},3029:function(e,t,n){"use strict";n.d(t,{h:function(){return r.Z},i:function(){return d}});var r=n(2476),a=n(6524),l=n(3373),i=n(7399),o=n(6537),s=n(1766),u=n(8978),c=(0,i.Z)({root:{fontFamily:"Zurich",fontWeight:700,color:l.Z.accent,display:"flex",flexDirection:"column",marginTop:11},date:{fontStretch:"condensed",fontSize:24},title:{fontStretch:"expanded",letterSpacing:.4,textTransform:"uppercase",fontSize:28}}),d=function(e){var t=e.heading,n=(0,u.sJ)(a.vb).time.format("h.mma ddd D MMM"),r=c();return s.default.createElement(o.Z,null,s.default.createElement("div",{className:r.root},s.default.createElement("p",{className:r.date},n),s.default.createElement("h1",{className:r.title},t)))}},8433:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var r=n(6524),a=n(5936),l=n(3262),i=n(7399),o=n(6537),s=n(1766),u=n(3029),c=n(9205),d=n(1671),f=n(3213),m=n(3373),h=n(2585),p="1.2em",g=(0,i.Z)({root:{background:m.Z.coloredButtons.red,color:"#fff",display:"inline-flex",lineHeight:p,justifyContent:"center",width:p,height:p,verticalAlign:"middle",transform:"translateY(-0.125em)",border:"2px solid #fff",borderRadius:"50%",fontSize:"0.95em"},inner:{transform:"translateY(-0.075em)",fontSize:"0.95em"}}),v=function(e){var t=e.className,n=g();return s.default.createElement("span",{"aria-label":"record button",className:(0,h.Z)(n.root,t)},s.default.createElement("span",{className:n.inner},"R"))},E=n(1717);var b=n(6851),w=n(3108),Z=n(2656),y=n.n(Z),N=n(2580),k=n.n(N),x="https://awk.epgsky.com/hawk/linear/schedule";function S(e,t){return T.apply(this,arguments)}function T(){return(T=(0,w.Z)(y().mark((function e(t,n){var r,a,l,i,o,s,u;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(r=void 0===n?{}:n).date,l=r.abortController,i=a?k()(a).format("YYYYMMDD"):k()().format("YYYYMMDD"),e.next=4,fetch(x+"/"+i+"/"+t,{signal:l.signal});case 4:return e.next=6,e.sent.json();case 6:return o=e.sent,s=o.schedule[0].events,u={date:o.date,schedule:s.map((function(e){return{startTime:1e3*e.st,duration:e.d,eventId:e.eid,channelGenreId:e.cgid,programmeUuid:e.programmeuuid,seasonNumber:e.seasonnumber,episodeNumber:e.episodenumber,seasonUuid:e.seasonuuid,seriesUuid:e.seriesuuid,hasChildren:e.haschildren,title:e.t,synopsis:e.sy,eg:e.eg,esg:e.esg,tso:e.tso,rating:e.r,audioTechnology:e.at,hasSubtitles:e.s,hasAudioDescription:e.ad,isHd:e.hd,isNew:e.new,canSeriesLink:e.canl,canBookRecording:e.canb,hasAlternativeAudio:e.hasAlternativeAudio,isRestartable:e.restartable,slo:e.slo,w:e.w,ippv:e.ippv,oppv:e.oppv}}))},e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=n(330),F=n.n(C),A=n(8978),z=n(7039),H=n.n(z),B=(0,i.Z)({info:{height:"0.75em",display:"inline-block"},infoContainer:{}}),P=function(e){var t=e.programmes,n=e.className,a=B(),l=(0,A.sJ)(r.zg).scheduleStartTime,i=t.length,o=0;return s.default.createElement(s.default.Fragment,null,t.map((function(e,t){var r=-k()(e.startTime).diff(l,"minutes"),u=Math.round(e.duration/60)-(r>0?r:0);return t<i-1?o+=u:u=90-o,s.default.createElement("span",{style:{gridColumnEnd:"span "+u},className:(0,h.Z)(n,u<25&&a.infoContainer),key:e.startTime+"__"+e.eventId},u<25?s.default.createElement(H(),{className:a.info}):e.title)})))},Y=s.default.memo(P);k().extend(F());var L=(0,i.Z)({item:{padding:"3px 4px"},channelNumber:{width:"3ch",marginRight:4},channelName:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:'".."',color:"#fff",background:m.Z.main,lineHeight:1},programme:{"&":{textOverflow:"ellipsis"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:'".."',color:"#fff",background:m.Z.main,lineHeight:1},noListings:{background:m.Z.mainFaded,color:m.Z.mainFadedText}});function M(e,t){return t.filter((function(t){var n=k()(t.startTime).diff(e,"minutes"),r=k()(t.startTime+1e3*t.duration).diff(e,"minutes"),a=k()(e).isBetween(t.startTime,t.startTime+1e3*t.duration,"minutes","()");return n>=0&&n<90||r>0&&r<90||a}))}var R=function(e){var t=e.channel,n=L(),a=(0,A.sJ)(r.zg).scheduleStartTime,l=(0,s.useState)(null),i=l[0],o=l[1],u=(0,s.useMemo)((function(){return i?M(a,i.schedule):null}),[M,a,i]);return(0,s.useEffect)((function(){if(!i){var e=new AbortController;return S(String(t.sid),{abortController:e}).then((function(e){o(e)})).catch((function(){})),function(){e.abort()}}}),[i,S,t]),s.default.createElement(s.default.Fragment,null,s.default.createElement("span",{className:(0,h.Z)(n.channelName,n.item)},s.default.createElement("span",{className:n.channelNumber},t.channelNumber),t.name),s.default.createElement("span",null),!i&&!u&&s.default.createElement("span",{"aria-hidden":!0,style:{gridColumnEnd:"span 90"}}),i&&u&&s.default.createElement(Y,{className:(0,h.Z)(n.programme,n.item),programmes:u}),i&&u&&0===u.length&&s.default.createElement("span",{className:(0,h.Z)(n.programme,n.noListings,n.item),style:{gridColumnEnd:"span 90"}},"..no listings available"))},_=n(5067),U=(0,i.Z)({timingHeader:{color:m.Z.accent,lineHeight:1.5,"&:first-child":{textAlign:"right"},"&:not(:first-child)":{gridColumnEnd:"span 30"}}}),D=function(){var e=(0,A.sJ)(r.zg).scheduleStartTime,t=U();return s.default.createElement(s.default.Fragment,null,s.default.createElement("span",{className:t.timingHeader},"Today"),s.default.createElement("span",null),s.default.createElement("span",{className:t.timingHeader},(0,_.j)(e)),s.default.createElement("span",{className:t.timingHeader},(0,_.j)(e.add(30,"minutes"))),s.default.createElement("span",{className:t.timingHeader},(0,_.j)(e.add(60,"minutes"))))},j=(0,i.Z)({root:{position:"relative",display:"grid",gridTemplateColumns:"33% 2px repeat(90, minmax(0, 1fr))",gridTemplateRows:"repeat(11, calc(1em + 6px))",width:"85%",maxWidth:"85%",margin:"auto",gap:4,overflow:"visible",fontFamily:"Zurich",fontStretch:"condensed",fontSize:24,marginTop:-4},rootWithListArrows:{"&::after, &::before":{content:'""',display:"block",position:"absolute",height:24,width:32,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundImage:"url("+c.Z+")",right:0,transformOrigin:"center"},"&::after":{bottom:0,transform:"translateY(100%)"},"&::before":{top:34,transform:"translateY(-100%) rotate(0.5turn)"}},colorButtons:{position:"static",width:"85%",maxWidth:"85%",margin:"auto",marginTop:16},controlPrompt:{fontFamily:"ZurichBT",color:m.Z.accent,width:"85%",maxWidth:"85%",margin:"auto",fontSize:24,marginTop:8},controlText:{fontSize:20},noChannelsErrorMsg:{gridColumn:"1 / -1",gridRow:"2 / -1",justifySelf:"center",alignSelf:"center",width:"100%"}});var I=function(e){var t,n,r=e.firstChannel,a=e.genreFilter,l=j(),i=(0,s.useState)(r),u=i[0],c=i[1],m=(t=u+"__"+a,n=(0,s.useRef)(),(0,s.useEffect)((function(){n.current=t})),n.current),p=(0,s.useState)([]),g=p[0],w=p[1];function Z(e){c((function(t){var n,r,l=(0,E.Yh)(t,10*e,a);l===t&&(l=1===e?(null===(n=(0,E.Hp)(0,a))||void 0===n?void 0:n.channelNumber)||(0,E.zB)(a)||"101":(null===(r=(0,E.Hp)(-1,a))||void 0===r?void 0:r.channelNumber)||(0,E.zB)(a)||"101");return window.history.replaceState&&function(e,t){var n=new URL(window.location.href);n.search="?start="+e,null!==t&&(n.search=n.search+"&genre="+t),window.history.replaceState({path:n.href},"",n.href)}(l,a),l}))}(0,s.useEffect)((function(){if(m!==u+"__"+a){var e=(0,E.Fn)(u,10,a);w(e)}}));var y=!g||0===g.length;return s.default.createElement(s.default.Fragment,null,s.default.createElement("section",{className:(0,h.Z)(l.root,!y&&l.rootWithListArrows)},s.default.createElement(D,null),s.default.createElement(o.Z,null,null==g?void 0:g.map((function(e){return s.default.createElement(R,{key:e.sid,channel:e})})),y&&s.default.createElement(f.Z,{errorCode:null,className:l.noChannelsErrorMsg,controlPrompt:!0,controlPromptAction:"cancel"},s.default.createElement("br",null),"There are no services of this type available."))),s.default.createElement(b.Z,{className:l.colorButtons,buttonPressHandler:function(e){"red"===e?Z(-1):"green"===e&&Z(1)},buttonsText:y?{}:{red:"Page Up",green:"Page Down",yellow:"+24 Hours",blue:"â€“24 Hours"}}),s.default.createElement("p",{className:l.controlPrompt},!y&&s.default.createElement(s.default.Fragment,null,"Press ",s.default.createElement(d.Z,{className:l.controlText},"SELECT")," to view or ",s.default.createElement(v,null)," to record")))},W=(0,i.Z)({root:{background:"url("+a.Z+")"}}),J=function(e){var t=e.startingChannel,n=e.genreFilter,r=W();return s.default.createElement("div",{className:r.root},s.default.createElement(u.h,{logoText:"guide"},s.default.createElement(o.Z,null,s.default.createElement(u.i,{heading:l.Y[n]||"All channels"}))),s.default.createElement(o.Z,null,s.default.createElement(I,{firstChannel:t,genreFilter:n})))},O=n(1074),G=n(1917),V=n(3230),X=n(5444);var q=function(e){var t,n,a=e.location,l=(null==a||null===(t=a.state)||void 0===t?void 0:t.startFromChannelNumber)||function(){if((0,G.Z)())return null;try{return new URL(window.location.href).searchParams.get("start")}catch(e){return null}}()||"101",i=(null==a||null===(n=a.state)||void 0===n?void 0:n.genre)||function(){if((0,G.Z)())return null;try{return parseInt(new URL(window.location.href).searchParams.get("genre"))||null}catch(e){return null}}()||null,o=(0,A.Zl)(r.X8);function u(e){var t=e.detail.control;["backUp"].includes(t)&&(0,X.navigate)("/",{state:{selectedTab:"GUIDE"}})}return(0,s.useEffect)((function(){return document.addEventListener("skyControlPressed",u),o((0,O.Z)(["backUp"],!0)),function(){document.removeEventListener("skyControlPressed",u),o((0,O.Z)(["backUp"],!1))}})),s.default.createElement(V.Z,null,s.default.createElement(J,{startingChannel:l,genreFilter:i}))}},7039:function(e,t,n){var r=n(1766);function a(e){return r.createElement("svg",e,r.createElement("path",{fill:"currentColor",d:"M.9 0v1.4h2.87V0zm0 2.12v3.85l-.9.17v.81h4.68v-.81l-.91-.17V2.12z"}))}a.defaultProps={viewBox:"0 0 4.68 6.95"},e.exports=a,a.default=a}}]);
//# sourceMappingURL=component---src-pages-epg-channel-list-tsx-7637c8ed708a6448c88d.js.map